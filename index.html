<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta name="description" content="{{ site.description }}">
<meta name="author" content="{{ site.author }}">

<title>Learn D3.js</title>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="lib/github.css">
<script src="lib/d3.v4.min.js"></script>
<script src="lib/highlight.pack.js"></script>
    
<header>
  <p><a href="\">home</a> | <a href="http://amitkaps.com"> amitkaps.com </a></p>
  <h1> Learn d3.js</h1>
  <div class="flex-grid">
    <div class="col">
      <h3> DATA </h3>
      <ul>
          <li><a href="#basic">Basic JS</a></li>
          <li><a href="#load">Load</a></li>
          <li><a href="#filter">Filter &amp; Sort </a></li>
          <li><a href="#summarize">Summarize</a></li>
          <li><a href="#groupby">Groupby</a></li>
          <li><a href="#combine">Combine</a></li>
      </ul>
    </div>
    <div class="col">
        <h3> VISUAL </h3>
        <ul>
            <li><a href="#bind">Select &amp; Bind</a></li>
            <li><a href="#svg">Draw SVGs</a></li>
            <li><a href="#scales">Scales</a></li>
            <li><a href="#">Loading Data</a></li>
            <li><a href="#">Loading Data</a></li>     
    </div>
    <div class="col">
      <h3>ANNOTATE</h3>
      <ul>
          <li><a href="#labels">Labels</a></li>
          <li><a href="#axes">Axes</a></li>
          <li><a href="#legends">Legends</a></li>
          <li><a href="#">Annotate</a></li>
          <li><a href="#">Loading Data</a></li> 
    </div>
    <div class="col">
        <h3>INTERACT</h3>
        <ul>
            <li><a href="#">Loading Data</a></li>
            <li><a href="#">Loading Data</a></li>
            <li><a href="#">Loading Data</a></li>
            <li><a href="#">Loading Data</a></li>
            <li><a href="#">Loading Data</a></li>
    </div>
    </div>
</header>

<main>
      <iframe sandbox="allow-popups allow-scripts allow-forms allow-same-origin" 
          src="example/basic.html" id="frame"
          marginwidth="0" marginheight="0" fram  style="height:500px;width:960px;" scrolling="no"></iframe>
      <h2 id="name"></h2>
      <div class="raw">
        <pre><code id="fileNode">
        </code></pre>
      </div>  
</main>

<script>

  const getExample = function () {
    let hash = window.location.hash
    let file = hash.replace("#", "");
    let fileName = file == "" ? "basic.html" : file + ".html";
    let fileUrl = "example/" + fileName;

    const iframeNode = document.querySelector('#frame');
    iframeNode.src = fileUrl;

    const nameNode = document.querySelector("#name");
    nameNode.innerHTML = '<a href="' + fileUrl + '">' + fileName + '</a>';
    const fileNode = document.querySelector("#fileNode");
    // fileNode.innerHTML = htmlfile + ".html"

    d3.text(fileUrl, function(error, content) {
      if (error) content = "Loading error...";
      fileNode.textContent = content;
      hljs.highlightBlock(fileNode);
    });
  }

  window.onhashchange = function () {getExample();}
  getExample();

</script>
